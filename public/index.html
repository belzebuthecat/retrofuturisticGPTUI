<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat with GPT</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
</head>
<body>
        <div class="retro-container">
                    <header>
            <h1>Guess my password</h1>
            <ul class="horizontal">
                <li id="infolink"><a href=""  >Info</a></li>
                <li><a href="#station">Credits</a></li>
 
            </ul>
        </header>
    


        <div id="chatbox" class='alert'></div>
        <input type="text" id="userInput" placeholder="Type a message..." class="big-textbox" />
        <button id="sendButton" onclick="sendMessage()">Send</button>
    </div>
       
  
         

    <script>
        document.getElementById('userInput').addEventListener('keydown', function(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        });


        $('#infolink').on('click', function() {
                alert('ciao');
        });

        async function sendMessage() {
            const inputBox = document.getElementById('userInput');
            const userMessage = inputBox.value.trim();
            if (!userMessage) return;

            displayMessage(userMessage, 'user');

            const sendButton = document.getElementById('sendButton');
            sendButton.disabled = true;

            try {
                const response = await fetch('/chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ message: userMessage })
                });

                const data = await response.json();
                displayMessage(data.message, 'bot');
            } catch (error) {
                console.error('Error:', error);
                displayMessage('Error communicating with the server.', 'bot');
            } finally {
                sendButton.disabled = false;
            }

            inputBox.value = '';
        }

        function displayMessage(message, type) {
            const chatbox = document.getElementById('chatbox');
            chatbox.textContent = message;
            chatbox.className = type;
        }
                document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                const main = document.querySelector('main');

                if (targetElement) {
                    main.scrollTo({
                        top: targetElement.offsetTop - main.offsetTop,
                        behavior: 'smooth'
                    });
                }
            });
        });
    </script>
</body>
</html>
